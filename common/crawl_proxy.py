from time import sleep

from common.merged_yaml.auto_import_proxy import merge_and_import_proxy
from common.merged_yaml.check_proxy import check_socks_proxy
from common.merged_yaml.crawl_yaml_file import freeclashnode


def crawl():
    sleep(5)
    freeclashnode()
    sleep(5)
    times = 1
    while times <= 3:
        try:
            merge_and_import_proxy()
            sleep(5)
            check_socks_proxy()
            break
        except FileNotFoundError as e:
            print(e)
            times += 1
